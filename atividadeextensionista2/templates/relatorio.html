{% extends "base.html" %}
{% block title %}Relat√≥rio de Problemas - Cidadania Ativa{% endblock %}

{% block content %}
<main class="fundo-cinza" style="max-width: 1000px; margin: 40px auto; padding: 30px;">
    <h2 style="text-align: center;">Relat√≥rio Cidadania Ativa</h2>

    <!-- Introdu√ß√£o -->
    <section style="margin-top: 20px;">
        <p style="text-align: justify; font-size: 15px;">
            Prezado(a) respons√°vel p√∫blico(a),
        </p>
        <p style="text-align: justify; font-size: 15px;">
            Este relat√≥rio √© uma iniciativa da comunidade local com o objetivo de identificar problemas urbanos ainda n√£o resolvidos e prioriz√°-los com base na participa√ß√£o dos pr√≥prios cidad√£os. A plataforma <strong>Cidadania Ativa</strong> permite que moradores registrem situa√ß√µes como buracos, entulho, ilumina√ß√£o p√∫blica defeituosa, entre outros, e que outros validem se o problema ainda persiste.
        </p>
        <p style="text-align: justify; font-size: 15px;">
            Acreditamos que este material pode colaborar com o trabalho de fiscaliza√ß√£o, planejamento e resposta das secretarias municipais e da C√¢mara de Vereadores. Esperamos que este canal de participa√ß√£o cidad√£ possa se transformar em a√ß√µes concretas em prol do bem comum.
        </p>

        <p style="text-align: right; font-style: italic; margin-top: 30px;">
            Atenciosamente,<br>
            Plataforma Cidadania Ativa
        </p>
    </section>

    <hr style="margin: 40px 0;">

    <!-- Lista de problemas -->
    <h3 style="text-align: center;">Problemas mais relatados pelos moradores</h3>

    {% for problema in problemas %}
    <section class="relatorio-problema-bloco">
        <h4 style="text-align: center;">{{ problema.titulo }}</h4>

        <div class="relatorio-problema-conteudo">
            <!-- Imagem -->
            <img src="{{ url_for('static', filename='imagens_problemas/' + problema.imagem) }}" class="imagem-problema">

            <!-- Informa√ß√µes -->
            <div class="relatorio-problema-info">
                <p><strong>Endere√ßo:</strong> {{ problema.endereco }}</p>
                <p><strong>Descri√ß√£o:</strong> {{ problema.descricao }}</p>
                <p><strong>Registrado por:</strong> {{ problema.autor.username }} em {{ problema.data_criacao.strftime('%d/%m/%Y') }}</p>
                <p><strong>Confirma√ß√µes ‚Äúexiste ainda‚Äù:</strong> {{ problema.contar_validacoes('existe') }}</p>
            </div>
        </div>
    </section>
    {% endfor %}

    <!-- Bot√£o PDF -->
    <div style="text-align: center; margin-top: 30px;">
        <button onclick="window.print()" class="botao verde">üìÑ Gerar PDF do Relat√≥rio</button>
    </div>
</main>
{% endblock %}

